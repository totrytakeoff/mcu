# ðŸŽ¯ ä½Žé€šæ»¤æ³¢å™¨å¿«é€Ÿå‚è€ƒ

## æ ¸å¿ƒå…¬å¼

```
Y(n) = Î± Ã— X(n) + (1-Î±) Ã— Y(n-1)

æ–°è¾“å‡º = å½“å‰å€¼çš„ä¸€éƒ¨åˆ† + åŽ†å²å€¼çš„ä¸€éƒ¨åˆ†
```

---

## Î±å€¼é€ŸæŸ¥è¡¨

| Î±å€¼ | ä»£ç å€¼ | ç‰¹æ€§ | ä½¿ç”¨åœºæ™¯ |
|-----|--------|------|----------|
| 0.2 | `77` | éžå¸¸å¹³æ»‘ | ä½Žé€Ÿã€å™ªå£°å¤§ |
| 0.3 | `77` | å¹³æ»‘ | ä½Žé€Ÿå·¡çº¿ |
| **0.4** | **`102`** | **å¹³è¡¡ï¼ˆæŽ¨èï¼‰** | **ä¸­é€Ÿå·¡çº¿** |
| 0.5 | `128` | é€‚ä¸­ | é€šç”¨ |
| 0.7 | `179` | å“åº”å¿« | é«˜é€Ÿå·¡çº¿ |
| 0.8 | `205` | å¾ˆå°‘æ»¤æ³¢ | æµ‹è¯•ç”¨ |

**è®¡ç®—å…¬å¼**: `ä»£ç å€¼ = Î± Ã— 256`

---

## ä¿®æ”¹æ»¤æ³¢ç³»æ•°

```cpp
// åœ¨ line_sensor.cpp ä¸­ä¿®æ”¹è¿™ä¸€è¡Œï¼š
const uint16_t alpha_numerator = 102;  // æ”¹æˆä½ æƒ³è¦çš„å€¼

// ç¤ºä¾‹ï¼š
const uint16_t alpha_numerator = 77;   // Î± = 0.3 (æ›´å¹³æ»‘)
const uint16_t alpha_numerator = 128;  // Î± = 0.5 (é€‚ä¸­)
const uint16_t alpha_numerator = 179;  // Î± = 0.7 (æ›´å¿«)
```

---

## ä½¿ç”¨æ–¹æ³•

```cpp
#include "line_sensor.hpp"

LineSensor sensor;
uint16_t data[8];

// å®Œæ•´çš„æ»¤æ³¢æµç¨‹
sensor.getData(data);  // è‡ªåŠ¨è¿›è¡Œä¸­å€¼+ä½Žé€šæ»¤æ³¢

// æˆ–è€…åˆ†æ­¥éª¤
sensor.getRawData(data);     // 1. è¯»å–åŽŸå§‹æ•°æ®
sensor.medianFilter(data);   // 2. ä¸­å€¼æ»¤æ³¢
sensor.lowPassFilter(data);  // 3. ä½Žé€šæ»¤æ³¢
```

---

## è°ƒè¯•æŠ€å·§

### è§‚å¯Ÿæ•°æ®æ˜¯å¦å¹³æ»‘

```cpp
while(1) {
    sensor.getData(data);
    Debug_Printf("ä¼ æ„Ÿå™¨: %d, %d, %d, %d, %d, %d, %d, %d\r\n",
                 data[0], data[1], data[2], data[3],
                 data[4], data[5], data[6], data[7]);
    HAL_Delay(100);
}
```

**å¥½çš„æ•ˆæžœï¼šæ•°å€¼ç¨³å®šï¼Œæ³¢åŠ¨å°äºŽ10**
**ä¸å¥½çš„æ•ˆæžœï¼šæ•°å€¼è·³åŠ¨ï¼Œæ³¢åŠ¨å¤§äºŽ20**

---

## é—®é¢˜è¯Šæ–­

| çŽ°è±¡ | åŽŸå›  | è§£å†³æ–¹æ¡ˆ |
|------|------|----------|
| æ•°æ®è·³åŠ¨å¤§ | Î±å¤ªå¤§ | å‡å°Î±ï¼ˆå¦‚ä»Ž0.5æ”¹åˆ°0.3ï¼‰ |
| å“åº”å¤ªæ…¢ | Î±å¤ªå° | å¢žå¤§Î±ï¼ˆå¦‚ä»Ž0.3æ”¹åˆ°0.5ï¼‰ |
| å®Œå…¨ä¸æ»¤æ³¢ | ä»£ç æœªè°ƒç”¨ | æ£€æŸ¥æ˜¯å¦è°ƒç”¨lowPassFilter |

---

## æ€§èƒ½æ•°æ®

- **è®¡ç®—æ—¶é—´**: ~4Î¼sï¼ˆ8ä¸ªä¼ æ„Ÿå™¨ï¼‰
- **å†…å­˜å ç”¨**: 17å­—èŠ‚
- **é‡‡æ ·é¢‘çŽ‡**: å»ºè®®10-50msä¸€æ¬¡

---

## æœ€ä½³å®žè·µ

âœ… **æŽ¨èåšæ³•ï¼š**
1. é»˜è®¤ä½¿ç”¨ Î± = 0.4
2. åŒæ—¶ä½¿ç”¨ä¸­å€¼+ä½Žé€šæ»¤æ³¢
3. æ ¹æ®å®žé™…æ•ˆæžœå¾®è°ƒ

âŒ **ä¸æŽ¨èï¼š**
1. ä¸ä½¿ç”¨ä»»ä½•æ»¤æ³¢
2. Î± > 0.8ï¼ˆå‡ ä¹Žæ²¡æ•ˆæžœï¼‰
3. Î± < 0.1ï¼ˆå¤ªæ…¢ï¼‰

---

**è¯¦ç»†æ–‡æ¡£**: `docs/LINE_SENSOR_FILTER_GUIDE.md`
