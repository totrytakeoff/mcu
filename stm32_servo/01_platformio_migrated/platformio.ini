; =============================================================================
; STM32F103 PWM Demo - PlatformIO Configuration
; =============================================================================
; 基于官方Keil demo迁移的PlatformIO项目配置
; 支持STM32F103VE芯片，兼容RCB6406/6412开发板

[env:stm32f103ve]
; 平台和开发板配置
platform = ststm32
board = genericSTM32F103VE
framework = stm32cube

; 编译器配置
build_flags = 
    -D STM32F103xE          ; 定义芯片型号
    -D USE_HAL_DRIVER       ; 使用HAL库
    -D HSE_VALUE=8000000    ; 外部晶振频率8MHz
    -Os                     ; 优化代码大小
    -Wall                   ; 启用所有警告
    -fdata-sections         ; 数据段分离
    -ffunction-sections     ; 函数段分离
    -Wl,--gc-sections       ; 链接时删除未使用段

; 包含路径
build_src_filter = 
    +<*>
    -<.git/>
    -<.svn/>

; 串口监视器配置
monitor_speed = 115200
; monitor_port = COM3

; 上传配置
upload_protocol = serial
; debug_tool = serial

; 自定义构建脚本
extra_scripts = scripts/build_info.py

; 库依赖
lib_deps = 
    # 如果需要额外库，在这里添加

; 高级配置
; PlatformIO会自动选择合适的链接脚本